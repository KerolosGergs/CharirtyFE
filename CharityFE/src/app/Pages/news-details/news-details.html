<!-- Navigation - Load immediately -->
 <app-header-component></app-header-component>
<app-nav></app-nav>

<!-- Main Content with Defer Loading -->
@defer (on idle) {
  <div class="news-details-container" dir="rtl">
    <!-- Loading State -->
    @if (loading) {
      <div class="loading-container">
        <div class="spinner-border text-success" role="status">
          <span class="visually-hidden">جاري التحميل...</span>
        </div>
        <p class="mt-3">جاري تحميل المقال...</p>
      </div>
    }

    <!-- Error State -->
    @if (error && !loading) {
      <div class="error-container">
        <div class="alert alert-danger" role="alert">
          <h4 class="alert-heading">خطأ في التحميل</h4>
          <p>عذراً، حدث خطأ أثناء تحميل المقال. يرجى المحاولة مرة أخرى.</p>
        </div>
      </div>
    }

    <!-- News Article Content -->
    @if (newsArticle && !loading) {
    <div class="page-wrapper">
      <div class="container">
        <div class="row">
          <div class="col-12">
            <!-- Breadcrumb -->
            <!-- <nav class="breadcrumb-nav">
              <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/home">الرئيسية</a></li>
                <li class="breadcrumb-item"><a href="/news">الأخبار</a></li>
                <li class="breadcrumb-item active">{{ newsArticle.title }}</li>
              </ol>
            </nav> -->

            <!-- Article Container -->
            <div class="article-container">
              <!-- Article Header -->
              <div class="article-header">
                <div class="article-meta">
                  <div class="meta-left">
                    <span class="date-info">
                      <i class="bi bi-calendar3"></i>
                      {{ newsArticle.createdAt | date:'longDate':'':'ar' }}
                    </span>
                  </div>
                </div>
                
                <h1 class="article-title">{{ newsArticle.title }}</h1>
              </div>

              <!-- Main Image -->
              <div class="main-image-section">
                <img [src]="newsArticle.imageUrl" 
                     [alt]="newsArticle.title" 
                     class="main-image"
                     (click)="openImageModal(newsArticle.imageUrl)">
              </div>

              <!-- Article Content -->
              <div class="article-content">
                <div class="content-text">
                  @for (paragraph of getProcessedContent(newsArticle.content); track $index) {
                    <p class="content-paragraph">{{ paragraph }}</p>
                  }
                </div>
                
                <!-- Additional Images from Database -->
                @if (newsArticle.imageUrls.length > 0) {
                  <div class="additional-images-section">
                    <h3 class="section-title">الصور المرفقة</h3>
                    <div class="images-gallery">
                      @for (imageUrl of newsArticle.imageUrls; track $index) {
                        <div class="gallery-item">
                          <img [src]="imageUrl" 
                               [alt]="'صورة ' + ($index + 1)" 
                               class="gallery-image"
                               (click)="openImageModal(imageUrl)">
                        </div>
                      }
                    </div>
                  </div>
                }
              </div>

              <!-- Article Footer -->
             
            </div>
          </div>
        </div>
      </div>
    </div>
  }

  <!-- Image Modal -->
  @if (showImageModal && selectedImage) {
    <div class="image-modal-overlay" (click)="closeImageModal()">
      <div class="image-modal-content" (click)="$event.stopPropagation()">
        <button class="modal-close-btn" (click)="closeImageModal()">
          <i class="bi bi-x-lg"></i>
        </button>
        <img [src]="selectedImage" [alt]="'صورة مكبرة'" class="modal-image">
      </div>
    </div>
     }
 </div>
 <app-footer></app-footer>

 } @placeholder {
  <div class="content-placeholder">
    <div class="spinner-border text-success" role="status">
      <span class="visually-hidden">جاري تحميل المحتوى...</span>
    </div>
    <p class="mt-3">جاري تحميل المحتوى...</p>
     </div>
 }

<!-- Footer - Load immediately -->
