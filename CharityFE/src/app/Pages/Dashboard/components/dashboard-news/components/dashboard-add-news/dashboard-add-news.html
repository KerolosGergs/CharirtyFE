<div class="popup-overlay">
  <div class="popup-card">
    <div class="text-center">
      <div class="image-header mb-3">
        <img src="Images/logo.png" alt="Header" class="header-img" />
      </div>
      <h3 class="text-success">إضافة مقال جديد</h3>
    </div>

    <form [formGroup]="articleForm" (ngSubmit)="onSubmit()">
      <!-- Image Upload -->
      <div class="form-group text-center">
        <label class="fw-bold mb-2">صورة المقال</label>
        <input type="file" accept="image/*" class="form-control mb-2" (change)="onImageChange($event)" />
        @if (uploadedImageUrl) {
          <img [src]="uploadedImageUrl" alt="صورة المقال" class="img-thumbnail rounded shadow mt-2" width="150" />
        }
        @if (articleForm.get('Image')?.touched && articleForm.get('Image')?.invalid) {
          <span class="text-danger small">يرجى تحميل صورة للمقال</span>
        }
      </div>

      <div class="form-group">
        <label for="title">العنوان</label>
        <input id="title" class="form-control" formControlName="title" placeholder="أدخل عنوان المقال" />
        @if (articleForm.get('title')?.touched && articleForm.get('title')?.invalid) {
          <span class="text-danger small">العنوان مطلوب ولا يزيد عن 100 حرف</span>
        }
      </div>

      <div class="form-group">
        <label for="summary">الملخص</label>
        <textarea id="summary" class="form-control" formControlName="summary" placeholder="اكتب ملخص المقال"></textarea>
        @if (articleForm.get('summary')?.touched && articleForm.get('summary')?.invalid) {
          <span class="text-danger small">الملخص مطلوب ولا يزيد عن 500 حرف</span>
        }
      </div>

      <div class="form-group">
        <label for="content">المحتوى</label>
        <textarea id="content" class="form-control" formControlName="content" rows="5" placeholder="المحتوى الكامل"></textarea>
        @if (articleForm.get('content')?.touched && articleForm.get('content')?.invalid) {
          <span class="text-danger small">المحتوى مطلوب ولا يزيد عن 5000 حرف</span>
        }
      </div>

      <div class="form-group">
        <label for="category">الفئة</label>
        <input id="category" class="form-control" formControlName="category" placeholder="فئة المقال" />
        @if (articleForm.get('category')?.touched && articleForm.get('category')?.invalid) {
          <span class="text-danger small">الفئة مطلوبة</span>
        }
      </div>

      <div class="form-group">
        <label for="tags">الوسوم (مفصولة " ")</label>
        <input id="tags" class="form-control" formControlName="tags" placeholder="مثال: تقنية,برمجة,مقالات" />
        @if (articleForm.get('tags')?.touched && articleForm.get('tags')?.invalid) {
          <span class="text-danger small">يرجى إدخال وسوم صحيحة</span>
        }
      </div>

      <div class="form-group form-check">
        <input type="checkbox" id="isPublished" class="form-check-input" formControlName="isPublished" />
        <label class="form-check-label" for="isPublished">نشر المقال مباشرة</label>
      </div>

      <button type="submit" class="btn w-100 mt-3 register-btn">نشر المقال</button>
      <button type="button" class="btn btn-outlet w-100 mt-2" (click)="onCancel()">إلغاء</button>
    </form>
  </div>
</div>
