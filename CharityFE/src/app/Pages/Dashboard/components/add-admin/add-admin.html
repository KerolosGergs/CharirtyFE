@defer {
<div class="help-container animate__animated animate__fadeInUp">
  <div class="page-header text-center mb-4">
    <h2 class="page-title">إضافة مشرف جديد</h2>
  </div>

  <div class="row g-4">
    <div class="col-lg-12 animate__animated animate__fadeInRight">
      <div class="bg-white p-4 rounded-3 shadow-sm">
        <div class="text-center mb-4">
          <h3 class="text-success fs-4">{{ formSection.title }}</h3>
        </div>

        <form [formGroup]="adminForm" (ngSubmit)="onSubmit()">
          <!-- Full Name -->
          <div class="form-group mb-3">
            <label for="fullName">الاسم الكامل</label>
            <div class="position-relative">
              <input
                type="text"
                id="fullName"
                formControlName="fullName"
                class="form-control pe-5"
                placeholder="الأسم بالكامل" />
              <i class="bi bi-person-fill input-icon position-absolute top-50 end-0 translate-middle-y pe-3 text-muted"></i>
            </div>
            @if (hasError('fullName')) {
              <span class="text-danger small">{{ getErrorMessage('fullName') }}</span>
            }
          </div>

          <!-- Email -->
          <div class="form-group mb-3">
            <label for="email">البريد الإلكتروني</label>
            <div class="position-relative">
              <input
                type="email"
                id="email"
                formControlName="email"
                class="form-control pe-5"
                placeholder="user@example.com" />
              <i class="bi bi-envelope-fill input-icon position-absolute top-50 end-0 translate-middle-y pe-3 text-muted"></i>
            </div>
            @if (hasError('email')) {
              <span class="text-danger small">{{ getErrorMessage('email') }}</span>
            }
          </div>

          <!-- Phone Number -->
          <div class="form-group mb-3">
            <label for="phoneNumber">رقم الهاتف</label>
            <div class="position-relative">
              <input
                type="tel"
                id="phoneNumber"
                formControlName="phoneNumber"
                class="form-control pe-5 text-end"
                inputmode="numeric"
                placeholder="966xxxxxxxxx"
                (input)="allowOnlyDigits($event)" />
              <i class="bi bi-telephone-fill input-icon position-absolute top-50 end-0 translate-middle-y pe-3 text-muted"></i>
            </div>
            @if (hasError('phoneNumber')) {
              <span class="text-danger small">{{ getErrorMessage('phoneNumber') }}</span>
            }
          </div>

          <!-- Password -->
          <div class="form-group mb-3">
            <label for="password">كلمة المرور</label>
            <div class="position-relative">
              <input
                [type]="showPassword ? 'text' : 'password'"
                id="password"
                formControlName="password"
                class="form-control pe-5 ps-5"
                placeholder="********" />
              <i class="bi bi-lock-fill input-icon position-absolute top-50 end-0 translate-middle-y pe-3 text-muted"></i>
              <button
                type="button"
                class="btn btn-link position-absolute top-50 start-0 translate-middle-y ps-3"
                (click)="showPassword = !showPassword"
                [attr.aria-label]="showPassword ? 'إخفاء كلمة المرور' : 'إظهار كلمة المرور'">
                <i class="bi" [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
              </button>
            </div>

            @if (hasError('password')) {
              <span class="text-danger small d-block mt-1">{{ getErrorMessage('password') }}</span>
            }

            <!-- Checklist فوري لمتطلبات كلمة المرور -->
            <ul class="small mt-2 mb-0 list-unstyled">
              <li [class.text-success]="hasMinLen" [class.text-muted]="!hasMinLen">✔ طول 6 أحرف على الأقل</li>
              <li [class.text-success]="hasUpper"  [class.text-muted]="!hasUpper">✔ حرف كبير (A-Z)</li>
              <li [class.text-success]="hasLower"  [class.text-muted]="!hasLower">✔ حرف صغير (a-z)</li>
              <li [class.text-success]="hasDigit"  [class.text-muted]="!hasDigit">✔ رقم (0-9)</li>
              <li [class.text-success]="hasSymbol" [class.text-muted]="!hasSymbol" [innerText]="'✔ رمز (مثل !@#$)'"></li>
            </ul>
          </div>

          <!-- Confirm Password -->
          <div class="form-group mb-3">
            <label for="confirmPassword">تأكيد كلمة المرور</label>
            <div class="position-relative">
              <input
                [type]="showConfirm ? 'text' : 'password'"
                id="confirmPassword"
                formControlName="confirmPassword"
                class="form-control pe-5 ps-5"
                placeholder="********" />
              <i class="bi bi-shield-lock-fill input-icon position-absolute top-50 end-0 translate-middle-y pe-3 text-muted"></i>
              <button
                type="button"
                class="btn btn-link position-absolute top-50 start-0 translate-middle-y ps-3"
                (click)="showConfirm = !showConfirm"
                [attr.aria-label]="showConfirm ? 'إخفاء التأكيد' : 'إظهار التأكيد'">
                <!-- <i class="bi" [ngClass]="showConfirm ? 'bi-eye-slash' : 'bi-eye'"></i> -->
              </button>
            </div>

            @if (hasError('confirmPassword') || adminForm.errors?.['mismatch']) {
              <span class="text-danger small">{{ getErrorMessage('confirmPassword') }}</span>
            }
          </div>

          <!-- Submit Button -->
          <div class="d-grid">
            <button type="submit" class="btn btn-success btn-lg" [disabled]="adminForm.invalid">
              <i class="bi bi-person-plus-fill me-2"></i> {{ submitButton.text }}
            </button>
          </div>
        </form>

      </div>
    </div>
  </div>
</div>
<app-admin-list></app-admin-list>
}

@placeholder {
  <app-spinner></app-spinner>
}
